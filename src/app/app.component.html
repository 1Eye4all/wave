<mat-sidenav-container fullscreen>
    <mat-sidenav #sidenavRight mode="side" (openedChange)="mapComponent.resize()">
        <wave-sidenav-container #sidenavContainer></wave-sidenav-container>
    </mat-sidenav>
    <div class="time-container" fxLayoutAlign="space-around center">
        <wave-zoom-handles (zoomIn)="map.zoomIn()" (zoomOut)="map.zoomOut()" class="mat-elevation-z4"></wave-zoom-handles>
    </div>
    <!-- <wave-navigation></wave-navigation> -->
    <!-- <wave-layer-list class="mat-elevation-z4" [height]="middleContainerHeight$ | async"></wave-layer-list> -->

    <div class="mid-container" [style.height.px]="middleContainerHeight$ | async">
        <wave-ol-map #map>
            <ng-template ngFor let-layer [ngForOf]='layersReverse$ | async'>
                <ng-template [ngIf]="layer.operator.resultType === ResultTypes.POINTS">
                    <wave-ol-point-layer
                        [layer]="layer"
                        [visible]="layer.visible"
                        [symbology]="layer.symbology"
                        [projection]="projectService.getProjectionStream() | async"
                        [time]="projectService.getTimeStream() | async"
                    ></wave-ol-point-layer>
                </ng-template>
                <ng-template [ngIf]="layer.operator.resultType === ResultTypes.LINES">
                    <wave-ol-line-layer
                        [layer]="layer"
                        [visible]="layer.visible"
                        [symbology]="layer.symbology"
                        [projection]="projectService.getProjectionStream() | async"
                        [time]="projectService.getTimeStream() | async"
                    ></wave-ol-line-layer>
                </ng-template>
                <ng-template [ngIf]="layer.operator.resultType === ResultTypes.POLYGONS">
                    <wave-ol-polygon-layer
                        [layer]="layer"
                        [visible]="layer.visible"
                        [symbology]="layer.symbology"
                        [projection]="projectService.getProjectionStream() | async"
                        [time]="projectService.getTimeStream() | async"
                    ></wave-ol-polygon-layer>
                </ng-template>
                <ng-template [ngIf]="layer.operator.resultType === ResultTypes.RASTER">
                    <wave-ol-raster-layer
                        [layer]="layer"
                        [visible]="layer.visible"
                        [symbology]="layer.symbology"
                        [projection]="projectService.getProjectionStream() | async"
                        [time]="projectService.getTimeStream() | async"
                    ></wave-ol-raster-layer>
                </ng-template>
            </ng-template>
        </wave-ol-map>
    </div>
    <div
        class="bottom-container mat-elevation-z4"
        [ngClass]="{small: !(layerDetailViewVisible$ | async)}"
        [style.height.px]="bottomContainerHeight$ | async"
    >
    </div>
</mat-sidenav-container>
