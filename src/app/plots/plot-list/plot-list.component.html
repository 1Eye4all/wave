<p *ngIf="(projectService.getPlotStream() | async)?.length == 0" class="no-plots">
    no plots available
</p>
<div fxLayout="row" fxLayoutAlign="space-around center">
    <mat-card *ngFor="let plot of (projectService.getPlotStream() | async)">
        <mat-card-header>
            <img mat-card-avatar [src]="plot.operator.operatorType.getIconUrl()" [alt]="plot.operator.resultType.toString()">
            <mat-card-title>{{plot.name}}</mat-card-title>
            <mat-card-subtitle>{{plot.operator.operatorType.toString()}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content *ngIf="(projectService.getPlotDataStatusStream(plot) | async) === LoadingState.LOADING">
            <mat-spinner></mat-spinner>
        </mat-card-content>
        <mat-card-content
            *ngIf="(projectService.getPlotDataStatusStream(plot) | async) === LoadingState.OK"
            [ngSwitch]="(projectService.getPlotDataStream(plot) | async)?.type"
        >
            <ng-template ngSwitchCase="text">
                <pre [style.maxHeight.px]="cardWidth$ | async">{{(projectService.getPlotDataStream(plot) | async)?.data}}</pre>
            </ng-template>
            <ng-template ngSwitchCase="png">
                <img src="data:image/png;base64,{{(projectService.getPlotDataStream(plot) | async)?.data}}" alt="{{plot.name}}">
            </ng-template>
            <ng-template ngSwitchCase="histogram">
                <wave-histogram
                    *ngIf="cardWidth$ | async"
                    [data]="(projectService.getPlotDataStream(plot) | async)"
                    [height]="(cardWidth$ | async) / 2"
                    [width]="cardWidth$ | async"
                    [interactable]="false"
                ></wave-histogram>
            </ng-template>
            <ng-template ngSwitchDefault>
                <pre>{{(projectService.getPlotDataStream(plot) | async)?.data}}</pre>
            </ng-template>
        </mat-card-content>
    </mat-card>
</div>
